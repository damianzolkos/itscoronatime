<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="style.css" rel="stylesheet" />
    <script src="chart-js/Chart.js"></script>
    <meta name="theme-color" content="#7500c1" />
    <script src="script.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,700;1,100&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin=""></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>It's Corona Time! in Poland</title>
</head>

<body>
    <header id="header">
        <div id="logo">
            <img id="logo_wide" src="logo_wide.png" alt="logo">
            <img id="logo_mobile" src="logo.png" alt="logo">
        </div>
        <div id="lead">Informacje na temat rozprzestrzeniania się i obecności koronawirusa w Polsce, bo mi się nudziło,
            a
            nigdzie nie było fajnego wykresu</div>
        <div id="menu">
            <ul>
                <a href="#info">
                    <li>Ogólne</li>
                </a>
                <a href="#trajektoriaID">
                    <li>Trajektoria</li>
                </a>
                <a href="#wojewodztwa">
                    <li>Województwa</li>
                </a>
                <a href="#wzrostID">
                    <li>Wzrost</li>
                </a>
                <a href="#noweID">
                    <li>Nowe przypadki</li>
                </a>
                <a href="#footer">
                    <li>Informacje</li>
                </a>
            </ul>
        </div>
    </header>

    <div id="content">
        <article class="info">
            <p>Zarażeni: <span class="box" id="cases"></span></p>
            <p>Zgony: <span class="box" id="deaths"></span></p>
            <p>Wyleczeni: <span class="box" id="recoveries"></span></p>
            <p>Zmiana dzienna: <span class="box" id="daily"></span></p>
            <br>
            <p class="text aktualizacja">dane aktualizowane raz dziennie, około godziny 21<br>
                ostatnia aktualizacja: <span id="refresh"></span></p>
        </article>
        <article>
            <h2 id="trajektoriaID">Trajektoria</h2>
            <p class="text">Linia trendu: 0.8683x^0.7418</p>
            <canvas id="trajektoria" width="10" height="6"></canvas>
        </article>

        <article class="info">
            <br>
            <h2 id="wojewodztwa">Ilość potwierdzonych przypadków</h2>
            <p class="text">z podziałem na województwa</p>
            <div id="w">
                <div class="wdiv w1">
                    <p class="wname">dolnośląskie: <span class="box wbox even" id="1">0</span></p>
                    <p class="wname">kujawsko-pomorskie: <span class="box wbox" id="2">0</span></p>
                    <p class="wname">lubelskie: <span class="box wbox even" id="3">0</span></p>
                    <p class="wname">lubuskie: <span class="box wbox" id="4">0</span></p>
                    <p class="wname">łódzkie <span class="box wbox even" id="5">0</span></p>
                    <p class="wname">małopolskie: <span class="box wbox" id="6">0</span></p>
                    <p class="wname">mazowieckie: <span class="box wbox even" id="7">0</span></p>
                    <p class="wname">opolskie: <span class="box wbox" id="8">0</span></p>
                </div>
                <div class="wdiv w2">
                    <p class="wname">podkarpackie: <span class="box wbox even" id="9">0</span></p>
                    <p class="wname">podlaskie: <span class="box wbox" id="10">0</span></p>
                    <p class="wname">pomorskie: <span class="box wbox even" id="11">0</span></p>
                    <p class="wname">śląskie: <span class="box wbox" id="12">0</span></p>
                    <p class="wname">świętokrzyskie: <span class="box wbox even" id="13">0</span></p>
                    <p class="wname">warmińsko-mazurskie: <span class="box wbox" id="14">0</span></p>
                    <p class="wname">wielkopolskie: <span class="box wbox even" id="15">0</span></p>
                    <p class="wname">zachodniopomorskie: <span class="box wbox" id="16">0</span></p>
                </div>
            </div>
            <div id="mapid"></div>
        </article>

        <article>
            <h2 id="wzrostID">Ilość wykonanych testów</h2>
        <iframe width="100%" height="515" frameborder="0" src="https://koronawirusunas.pl/u/polska-testy-nowe"></iframe>
        </article>

        <article>
            <h2 id="wzrostID">Wzrost potwierdzonych przypadków</h2>
            <iframe width="100%" height="515" frameborder="0" src="https://koronawirusunas.pl/u/polska-nowe"></iframe>
            <canvas id="wzrost" width="10" height="6"></canvas>
        </article>

        <article>
            <h2 id="noweID">Nowe potwierdzone przypadki na dzień</h2>
            <p class="text">linia trendu: y = 0.4534x² - 1.6261x + 4.4917
                <br>R² = 0.9758</p>
            <canvas id="nowe" width="10" height="6"></canvas>
        </article>
    </div>

    <div id="footer">
        &copy <a href="https://damianzolkos.github.io">Damian Żółkoś</a>
        <br><br>
        dane na podstawie: <a href="https://koronawirusunas.pl/">koronawirusunas.pl</a>
        <br><br>
        plik Excel z danymi: <a href="COVID-19.xlsx">COVID-19.xlsx</a>
        <br><br>
        wersja: 0.1.beta
    </div>

    <script>
        var json = {};
        async function map() {
            var mymap = L.map('mapid').setView([52.039, 19.556], 13);
            L.tileLayer(
                'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWVzb3BvZGFtaWFuIiwiYSI6ImNrOGJsczB4NTBkZWwzamx2N2k1dmlrb2cifQ.eCiVRNg703j-7gNDqiBVLw', {
                    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                    maxZoom: 6,
                    id: 'mapbox/streets-v11',
                    tileSize: 512,
                    zoomOffset: -1,
                    accessToken: 'your.mapbox.access.token'
                }).addTo(mymap);

            let url = 'data.json';
            json = await (await fetch(url)).json();


            var wojewodztwa = [json.woj.dolnośląskie, json.woj.kujawskopomorskie, json.woj.lubelskie, json.woj
                .lubuskie, json.woj.łódzkie, json.woj.małopolskie, json.woj.mazowieckie, json.woj.opolskie, json
                .woj.podkarpackie, json.woj.podlaskie, json.woj.pomorskie, json.woj.śląskie, json.woj
                .świętokrzyskie, json.woj.warmińskomazurskie, json.woj.wielkopolskie, json.woj
                .zachodniopomorskie
            ];

            for (i = 1; i < 17; i++) {
                var circle = L.circle([json.longitude[i - 1], json.latitude[i - 1]], {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.5,
                    radius: wojewodztwa[i - 1] * 200
                }).addTo(mymap);
            }
        }
        map();
    </script>

</body>

</html>